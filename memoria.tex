%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper, 12pt, oneside]{book}

%%-- Geometría principal (dejar activada la siguiente línea en la versión final)
\usepackage[a4paper, left=2.5cm, right=2.5cm, top=3cm, bottom=3cm]{geometry}
%%-- Activar esta línea y comentar la anterior en modo borrador, para comentarios al margen
%\usepackage[a4paper, left=2.5cm, right=2.5cm, top=3cm, bottom=3cm, marginparwidth=60pt]{geometry}

%%-- Hay que cargarlo antes que las traducciones
\usepackage{listing}                    % Listados de código

% Traducciones en XeLaTeX
\usepackage{polyglossia}
\setmainlanguage{spanish}    % Comenta esta línea si tu memoria es en inglés

% Traducciones particulares para español
% Caption tablas
\gappto\captionsspanish{
	\def\tablename{Tabla}
	\def\listingscaption{Código}
	\def\refname{Bibliografía}
	\def\appendixname{Apéndice}
	\def\listtablename{Índice de tablas}
	\def\listingname{Código}
	\def\listlistingname{Índice de fragmentos de código}
}

%% Tipografía y estilos
\usepackage[OT1]{fontenc}               % Keeps eulervm happy about accents encoding

% Símbolos y fuentes matemáticas elegantes: Euler virtual math fonts
% ¡Importante! Carga siempre las fuentes math AMS Euler ANTES QUE fontspec
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[OT1,euler-digits,euler-hat-accent,small]{eulervm}

% En XeLaTeX las fuentes se especifican con fontspec
\usepackage{fontspec}
\defaultfontfeatures{Scale=MatchLowercase, Ligatures=TeX}     % Default option in font config

% Fix para fuentes usadas con operadores y \mathrm
\DeclareSymbolFont{operators}{\encodingdefault}{\familydefault}{m}{n}

% Configura la fuente principal (serif): MinionPro
\setmainfont[Scale=0.96]{TeX Gyre Pagella}
% Configura la fuente sans-serif (\sffamily)
\setsansfont[Scale=MatchLowercase]{Lato}
% Configura la fuente para letra monoespaciada: Source Code Pro, escala 0.85
\setmonofont[Scale=0.85]{Source Code Pro}

%%-- Familias de fuentes específicas
%%-- Se pueden definir etiquetas para familias de fuentes personalizadas
%%-- que luego puedes emplear para cambiar el formato de una parte de texto
%%-- Ejemplo:
% \newfontfamily{\myriadprocond}{Myriad Pro Semibold Condensed.otf}

%%-- Opciones de interlineado y espacios
\linespread{1.07}                   % Aumentar interlineado para fuentes tipo Palatino
\setlength{\parskip}{\baselineskip} % Separar párrafos con línea en blanco

% Line and page breaking
\sloppy
\clubpenalty = 10000
\widowpenalty = 10000
\brokenpenalty = 10000
\usepackage{ragged2e}				% Enhanced ragged commands

%%-- Hipervínculos
\usepackage{url}

%%-- Gráficos y tablas
\PassOptionsToPackage{dvipdfmx,usenames,dvipsnames,x11names,table}{xcolor}             % Definiciones de colores
\PassOptionsToPackage{xetex}{graphicx}

\usepackage{subfig}                     % Subfiguras
\usepackage{pgf}
\usepackage{svg}                        % Integración de imágenes en formato SVG
\usepackage{float}                      % H para posicionar figuras
\usepackage{booktabs}                   % Already loads package xcolor
\usepackage{longtable}                  % Tables spanning several pages
\usepackage{multicol}                   % multiple column layout facilities
\usepackage{colortbl}                   % For coloured tables
\usepackage{array}                      % Column adjustment in tables

%%-- Bibliografía con Biblatex y Biber
% Más info:
% https://www.overleaf.com/learn/latex/Biblatex_bibliography_styles
% https://www.overleaf.com/learn/latex/biblatex_citation_styles
\usepackage[
    backend=biber,
    style=numeric,
    sorting=none
    ]{biblatex}
\addbibresource{memoria.bib}
% \DeclareFieldFormat{url}{\mkbibacro{URL}\addcolon\nobreakspace\url{#1}}
%\usepackage[nottoc, notlot, notlof, notindex]{tocbibind} %% Opciones de índice

%%-- Matemáticas e ingeniería
% El paquete units permite mostrar unidades correctamente
% Permite escribir unidades con espaciado y estilo de fuente correctos
\usepackage{units}         
% Ejemplo de uso: $\unit[100]{m}$ or $\unitfrac[100]{m}{s}$
% Entornos matemáticos
\newtheorem{theorem}{Theorem}

% Paquetes adicionales
\usepackage{url}                        %% Gestión correcta de enlaces
\usepackage{float}                      %% H para posicionar figuras
\usepackage[nottoc, notlot, notlof, notindex]{tocbibind}    %% Opciones de índice
\usepackage{metalogo}                   %% Múltiples logos para XeLaTeX

% Fuentes especiales y glifos
\usepackage{ccicons}                % Creative Commons icons
\usepackage{metalogo}               % XeTeX logo
\usepackage{fontawesome5}           % Fontawesome 5 icons
\usepackage{adforn} 

% Blindtext
% Opciones pangram, bible, random (defecto)
\usepackage[pangram]{blindtext}
% Lorem ipsum
\usepackage{lipsum}
% Kant lipsum
\usepackage{kantlipsum}

\usepackage{fancyvrb}               % Entornos verbatim extendidos
	\fvset{fontsize=\normalsize}    % Tamaño de fuente por defecto en fancy-verbatim
	
% Configura listas (itemize, enumerate) con iconos personalizados
% Fácil reinicio de numeración con enumerate
% Info: http://ctan.org/pkg/enumitem
\usepackage[shortlabels]{enumitem}
% Usar \usageitem para configurar iconos personalizados en listas
\newcommand{\usageitem}[1]{%
	\item[%
	{\makebox[2em]{\strut\color{GSyCblue} #1}}%
	]
}

%%-- Definición de colores personalizados
% \definecolor{LightGrey}{HTML}{EEEEEE}
% \definecolor{darkred}{rgb}{0.5,0,0}     %% Refs. cruzadas
% \definecolor{darkgreen}{rgb}{0,0.5,0}   %% Citas bibliográficas
% \definecolor{darkblue}{rgb}{0,0,0.5}    %% Hiperenlaces ordinarios (también ToC)

%%-- Configuración fragmentos de código
%%-- Minted necesita Python Pygments instalado en el sistema para funcionar
%%-- En Overleaf ya está instalada esta dependencia
\usepackage[labelfont=bf]{caption}
\newcommand{\source}[1]{\vspace{-3pt} \caption*{Fuente: {#1}} }
\usepackage{minted}
\usemintedstyle{vs}

%%-- Se debe cargar aquí para evitar warnings
\usepackage{csquotes}                   % Para traducciones con biblatex

%%-- Glosario de términos
\usepackage[acronym]{glossaries}
\makeglossaries
\loadglsentries{glossary}

% % Definición de cabeceras del documento, usando fancyhdr
% \usepackage{fancyhdr}
% %% Configuración de cabeceras para el cuerpo principal del documento
% \pagestyle{fancy}
% \fancyhead{}
% \fancyhead[RO,LE]{\myriadprocond{\thepage}}
% \renewcommand{\chaptermark}[1]{\markboth{\chaptername\ \thechapter.\ #1}{}}
% \renewcommand{\sectionmark}[1]{\markright{\thesection.\ #1}}
% \fancyhead[RE]{\myriadprocond{\leftmark}}
% \fancyhead[LO]{\myriadprocond{\rightmark}}
% \renewcommand{\headrulewidth}{0pt}
% \setlength{\headheight}{15pt} %% Al menos 15pt para evitar warning al compilar
% \fancyfoot{}
% %% Configuración para páginas con cabecera en blanco
% \fancypagestyle{plain}{%
% \fancyhf{}% clear all header and footer fields
% \fancyhead[RO,LE]{\myriadprocond{\thepage}}
% \renewcommand{\headrulewidth}{0pt}%
% \renewcommand{\footrulewidth}{0pt}%
% }
\AtBeginDocument{\addtocontents{toc}{\protect\thispagestyle{empty}}} 

%%%%%%%%%%%%%%%%%%%
%% Own changes
%%%%%%%%%%%%%%%%%%%
\newenvironment{conditions}[1][donde:]
  {#1 \begin{tabular}[t]{>{$}l<{$} @{${}={}$} l}}
  {\end{tabular}\\[\belowdisplayskip]}
\raggedbottom


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%-- Metadatos del doc
\title{Comparativa del Consumo Energético de Algoritmos de Aprendizaje Automático}
\author{Laura Gonzalez Fernandez}

%%-- Hiperenlaces, siempre se carga al final del preámbulo
\usepackage[colorlinks]{hyperref}
\hypersetup{
    pdftoolbar=true,	% Muestra barra de herramientas en Adobe Acrobat
	pdfmenubar=true,	% Muestra menú en Adobe Acrobat
	pdftitle={TFG - Comparativa del Consumo Energético de Algoritmos de Aprendizaje Automático},
	pdfauthor={Laura Gonzalez Fernandez},
	pdfcreator={EIF, URJC},
	pdfproducer={XeLaTeX},
	pdfsubject={Machine-learning, eficiencia energética},
	pdfnewwindow=true,              %links open in new window
    colorlinks=true,                % false: boxed links; true: coloured links
    linkcolor=Firebrick4,           % enlaces internos 
    citecolor=Aquamarine4,          % enlaces a citas bibliográficas
    urlcolor=RoyalBlue3,            % hiperenlances ordinarios
    linktocpage=true                % Enlaces en núm. pág. en ToC
}

%%%---------------------------------------------------------------------------
% Comentarios en línea de revisión
% Este bloque se puede borrar cuando finalizamos el borrador

\usepackage[colorinlistoftodos]{todonotes}
\newcommand\todoin[2][]{\todo[inline, color=green!40, caption={2do}, #1]{
\begin{minipage}{\textwidth-4pt}#2\end{minipage}}}
\usepackage{verbatim}

% \hyphenpenalty 10
% \exhyphenpenalty 10
\pretolerance=5000
\tolerance=9000
\emergencystretch=2pt
\righthyphenmin=4
\lefthyphenmin=4

\interfootnotelinepenalty=10000

\usepackage[
    type={CC},
    modifier={by-sa},
    version={4.0},
]{doclicense}

%%%---------------------------------------------------------------------------

\begin{document}

%%-- Configuración común para todos los entornos listing
%%-- Descomentar para usar y personalizar valores
%\lstset{%
%breakatwhitespace=true,
% breaklines=true, 
% basicstyle=\footnotesize\ttfamily,
% keywordstyle=\color{blue},
% commentstyle=\color{green!40!black}, 
% language=Python} 
 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PORTADA

\begin{titlepage}
\begin{center}
\begin{tabular}[c]{c c}
%\includegraphics[bb=0 0 194 352, scale=0.25]{logo} &
\includegraphics[scale=1.5]{img/LogoURJC.png}
%&
%\begin{tabular}[b]{l}
%\Huge
%\textsf{UNIVERSIDAD} \\
%\Huge
%\textsf{REY JUAN CARLOS} \\
%\end{tabular}
\\
\end{tabular}

\vspace{1.5cm}

\Large 
ESCUELA DE INGENIERÍA DE FUENLABRADA

\vspace{1.2cm}

\Large 
GRADO EN INGENIERÍA EN TECNOLOGÍAS DE LA TELECOMUNICACIÓN

\vspace{0.8cm}
\LARGE 
\textbf{\uppercase{Trabajo Fin de Grado}}

\vspace{2cm}

\LARGE Comparativa del consumo energético de algoritmos de aprendizaje automático
\vspace{2cm}

\large
Autora : Laura González Fernández \\
Tutor : José Felipe Ortega Soto

\vspace{0.8cm}
\large
Curso Académico 2023/2024

\end{center}
\pagenumbering{gobble}
\end{titlepage}


\newpage
\mbox{}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Para firmar
\clearpage
\frontmatter
\pagestyle{empty}
\chapter*{}
\thispagestyle{empty}

\vspace{-4cm}
\begin{center}
\LARGE
\textbf{Trabajo Fin de Grado}

\vspace{1cm}
\large
Comparativa del Consumo Energético de Algoritmos de Aprendizaje Automático

\vspace{1cm}
\large
\textbf{Autora :} Laura González Fernández  \\
\textbf{Tutor :} José Felipe Ortega Soto

\end{center}

\vspace{1cm}
La defensa del presente Proyecto Fin de Grado se realizó el día \qquad$\;\,$ de \qquad\qquad\qquad\qquad \newline de 2024, siendo calificada por el siguiente tribunal:


\vspace{0.5cm}
\textbf{Presidente:}

\vspace{0.8cm}
\textbf{Secretario:}

\vspace{0.8cm}
\textbf{Vocal:}


\vspace{0.8cm}
y habiendo obtenido la siguiente calificación:

\vspace{0.8cm}
\textbf{Calificación:}


\vspace{0.8cm}
\begin{flushright}
Fuenlabrada, a \qquad$\;\,$ de \qquad\qquad\qquad\qquad de 2024
\end{flushright}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Dedicatoria

% \chapter*{}
% \thispagestyle{empty}
% %\pagenumbering{Roman} % para comenzar la numeración de paginas en numeros romanos
% \begin{flushright}
% \textit{To the future.\\}
% \end{flushright}

\chapter*{}
\thispagestyle{empty}
%\pagenumbering{Roman} % para comenzar la numeración de paginas en numeros romanos

\begin{flushright}
\begin{minipage}{8cm}
\raggedleft
©2024 Laura González Fernández  \\
Algunos derechos reservados. \\
\doclicenseLongText \\
\vspace{0.5cm}
\doclicenseImage
\end{minipage}

\end{flushright}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Agradecimientos

\chapter*{Agradecimientos}
\thispagestyle{empty}
%\addcontentsline{toc}{chapter}{Agradecimientos} % si queremos que aparezca en el índice
\markboth{AGRADECIMIENTOS}{AGRADECIMIENTOS} % encabezado 

Quisiera aprovechar esta oportunidad para agradecer a las muchas personas que han contribuido de manera significativa a la realización de esta memoria de grado.

En primer lugar, agradezco a mi familia por su apoyo constante y paciencia a lo largo de mi trayectoria académica. Siempre confiaron en mí, incluso en los momentos de duda. Gracias también por su ayuda durante este proyecto, ya sea con la recopilación de datos o revisando mis resultados. A mi hermana, especialmente, gracias por soportarme estos últimos años mientras avanzaba en este proyecto.

Extiendo mi agradecimiento a mis supervisores por su orientación, experiencia y valiosos comentarios durante el desarrollo de la memoria. Su dedicación y disposición para compartir su conocimiento han sido esenciales.

A mis amigos y colegas, gracias por estar a mi lado durante este proceso. Su apoyo y las frecuentes preguntas sobre el estado de mi "interminable proyecto de IA sostenible" me motivaron a seguir adelante.

Esta memoria es el resultado de años de esfuerzo y dedicación, y agradezco a todos los que me apoyaron en este camino.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Resumen

\chapter*{Resumen}
\thispagestyle{empty}
\addcontentsline{toc}{chapter}{Resumen} % si queremos que aparezca en el índice
\markboth{RESUMEN}{RESUMEN} % encabezado
%(máximo una página, se recomienda la estructura: antecedentes,
%objetivos, métodos, resultados y conclusiones)

El aprendizaje automático se ha desarrollado a pasos de gigante durante los últimos años, permitiendo a los sistemas informáticos abstraer relaciones complejas entre datos y hacer predicciones precisas. Sin embargo, estos avances también han incrementado el consumo energético debido al procesamiento de enormes cantidades de datos, lo que genera una huella ambiental significativa. En este contexto, se vuelve imperativo equilibrar la precisión y eficacia de los modelos de aprendizaje automático con su impacto energético.

Este proyecto tiene como objetivo proporcionar una herramienta que permita comparar modelos de aprendizaje automático en términos de precisión y consumo energético. Para ello, se ha desarrollado una aplicación utilizando scikit-learn, Python y CodeCarbon, junto con conjuntos de datos públicos. La arquitectura de la aplicación está diseñada para medir las emisiones de carbono producidas durante el entrenamiento de varios modelos, abarcando todo el proceso de aprendizaje desde la preparación de datos y la validación cruzada de los modelos hasta la recopilación de consumo energético usando CodeCarbon.

Para ofrecer una muestra del funcionamiento de la aplicación se llevaron a cabo dos experimentos principales. El primero comparó las emisiones y la precisión de varios modelos en diferentes conjuntos de datos de creciente complejidad. El modelo de vecinos más cercanos mostró un consumo energético bajo y precisión moderada, mientras que el modelo de bosque aleatorio ofreció alta precisión con consumo moderado. Las redes neuronales, aunque precisas, presentaron un consumo significativamente mayor. El segundo experimento evaluó las emisiones en máquinas con distintas configuraciones de recursos, usando máquinas virtuales en Microsoft Azure. Los resultados indicaron que el uso de paralelismo y mayor cantidad de procesadores aumenta el consumo energético por unidad de tiempo, pero reduce el tiempo total de entrenamiento, compensando el incremento en consumo.

En conclusión, este proyecto no solo proporciona una herramienta útil para la evaluación de modelos de aprendizaje automático desde una perspectiva de sostenibilidad, sino que también destaca la necesidad de tener en cuenta el impacto ambiental en el desarrollo de soluciones tecnológicas avanzadas. Futuros trabajos podrán expandir sobre esta base, explorando nuevos modelos y técnicas de optimización para reducir aún más el consumo energético sin comprometer la precisión.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Resumen en inglés

\chapter*{Summary}
\addcontentsline{toc}{chapter}{Summary} % si queremos que aparezca en el índice
\markboth{SUMMARY}{SUMMARY} % encabezado

Machine learning has experienced great progress in recent years, allowing computer systems to abstract complex relationships between data and make accurate predictions. However, these advances have also increased energy consumption due to the cost of processing vast amounts of data, resulting in a significant environmental footprint. In this context, it is imperative to balance the precision and efficiency of machine learning models with their energy impact.

This project aims to provide a tool to compare machine learning models in terms of their precision and energy consumption. To achieve this, an application was developed using scikit-learn, Python, and CodeCarbon, along with publicly available datasets. The application's architecture is designed to measure carbon emissions produced during the training of various models, covering the entire learning process from data preparation and model cross-validation to energy consumption collection using CodeCarbon.

To demonstrate the application’s functionality, two main experiments were conducted. The first compared the emissions and precision of various models on different datasets of increasing complexity. The k-nearest neighbors model showed low energy consumption and moderate precision, while the random forest model offered high precision with moderate consumption. Neural networks, although precise, had significantly higher consumption. The second experiment evaluated emissions on machines with different resource configurations using virtual machines on Microsoft Azure. The results indicated that using parallelism and more processors increases energy consumption per unit of time but reduces total training time, compensating for the increased consumption.

In conclusion, this project provides a useful tool for evaluating machine learning models from a sustainability perspective, highlighting the importance of considering environmental impact in developing advanced technological solutions. Future work can build on this foundation by exploring new models and optimization techniques to further reduce energy consumption without compromising precision.

%%%%--------------------------------------------------------------------
% Lista de comentarios de revisión
% Se puede borrar este bloque al acabar el borrador

% \listoftodos
% \thispagestyle{empty}
% \markboth{TODO LIST}{TODO LIST} % encabezado
%%%%--------------------------------------------------------------------

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ÍNDICES %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Las buenas noticias es que los índices se generan automáticamente.
% Lo único que tienes que hacer es elegir cuáles quieren que se generen,
% y comentar/descomentar esa instrucción de LaTeX.

%%-- Índice de contenidos
\tableofcontents 
\thispagestyle{empty}
\cleardoublepage
%%-- Índice de figuras

\addcontentsline{toc}{chapter}{Lista de figuras} % para que aparezca en el indice de contenidos
\thispagestyle{empty}
\listoffigures % indice de figuras
\thispagestyle{empty}

\cleardoublepage
%%-- Índice de tablas
%\addcontentsline{toc}{chapter}{Lista de tablas} % para que aparezca en el indice de contenidos
%\listoftables % indice de tablas
% \cleardoublepage
%%-- Índice de fragmentos de código
% \addcontentsline{toc}{chapter}{List of listings} % para que aparezca en el indice de contenidos
% \listoflistings

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   CONTENT   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\mainmatter
\pagestyle{headings}

\include{files/1-intro.tex}
\include{files/2-sota.tex}
\include{files/3-diseño.tex}
\include{files/4-experimentos.tex}
\include{files/5-conclusiones.tex}

% GLOSARIO(S) %
\printglossary[type=\acronymtype]
\printglossary

% APÉNDICE(S) %
\cleardoublepage
\appendix
\include{files/appendix.tex}

% BIBLIOGRAFIA %
\cleardoublepage
% https://www.overleaf.com/learn/latex/Bibliography_management_with_biblatex
\raggedright\printbibliography[heading=bibintoc,title={Referencias}]

\end{document}
